---
title: "aws-cdk ã§ Received response status [FAILED] from custom resource. Message returned: ParameterAlreadyExists ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ãŒã§ãŸã¨ãã®è§£æ±ºæ–¹æ³•"
emoji: "ğŸ£"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
tags: ["AWS", "TypeScript"]
published: true
published_at: "2023-07-15 14:25"
---

# ç¾è±¡

`npx cdk deploy --all` ã‚„ `npx cdk destroy --all` ã‚’ç¹°ã‚Šè¿”ã—ã¦ã„ãŸã‚‰ã€ä»¥ä¸‹ã®ã‚ˆã†ãªã‚¨ãƒ©ãƒ¼ãŒå‡ºãŸã€‚

```bash:ã‚¨ãƒ©ãƒ¼å†…å®¹
Received response status [FAILED] from custom resource. Message returned: ParameterAlreadyExists: The parameter already exists. To overwrite this value, set the overwrite option in the request to true.
```

`npx cdk destroy --all` ã‚’ã‚„ã‚Šç›´ã—ã¦ã¿ãŸã‚Šã€ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‹ã‚‰ stack ã‚’å‰Šé™¤ã—ã¦ã¿ãŸã‚Šã€è‰²ã€…è©¦ã—ãŸãŒè§£æ±ºã—ãªã‹ã£ãŸã€‚
ã‚¨ãƒ©ãƒ¼ã§æ¤œç´¢ã—ã¦ã¿ã‚‹ã¨ã€ stackoverflow ã‚„ github ã® issue ãŒãƒ’ãƒƒãƒˆã—ãŸãŒã€å…·ä½“çš„ãªè§£æ±ºæ–¹æ³•ã¯è¼‰ã£ã¦ã„ãªã‹ã£ãŸã€‚

https://stackoverflow.com/questions/68733127/how-to-solve-received-response-status-failed-from-custom-resource-message

https://github.com/aws/aws-cdk/issues/24464

# è§£æ±ºæ–¹æ³•

ã©ã†ã‚„ã‚‰ `ParameterAlreadyExists` ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ã¯ ssm ã®ã‚¨ãƒ©ãƒ¼ã‚‰ã—ã„ã®ã§ã€stack ã‚’å‰Šé™¤ã™ã‚‹éš›ã«æ¶ˆãˆã¦ã„ãªã„ parameter ãŒã‚ã‚‹ã¨æ€ã£ãŸã€‚
ãã“ã§ã€ä»¥ä¸‹ã®ã‚ˆã†ãªã‚³ãƒãƒ³ãƒ‰ã§èª¿ã¹ãŸã€‚

```bash:ssmã®parameterã‚’ä¸€è¦§è¡¨ç¤ºã™ã‚‹
aws ssm get-parameters-by-path --path '/' --recursive
```

ãã†ã™ã‚‹ã¨ã€version ã‚’ç®¡ç†ã—ã¦ã„ã‚‹ã¨æ€ã‚ã‚Œã‚‹ aws-cdk ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®ä»–ã«ã€ãªã‚“ã ã‹è¦‹è¦šãˆã®ãªã„ parameter ãŒã‚ã£ãŸã®ã§ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§å‰Šé™¤ã—ãŸã€‚

```bash:ç‰¹å®šã®parameterã‚’å‰Šé™¤ã™ã‚‹
aws ssm delete-parameter --name ã‚­ãƒ¼
```

ãã®å¾Œã€`npx cdk deploy --all` ãªã©ã™ã‚‹ã¨ã†ã¾ãã„ã£ãŸã€‚ãƒãƒƒãƒˆä¸Šã«æƒ…å ±ãŒãªã‹ã£ãŸã®ã§ã€åŒã˜ã‚ˆã†ã«æ‚©ã‚“ã§ã„ã‚‹äººã®åŠ©ã‘ã«ãªã‚Œã°å¹¸ã„ã§ã™ã€‚

# å‚è€ƒ

https://atsum.in/aws/aws-cli-parameter-store/
