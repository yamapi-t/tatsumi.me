---
title: "app routerã§sitemapã‚’ä½œã‚‹"
emoji: "ğŸ¤–"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
tags: ["Next.js", "TypeScript"]
published: true
published_at: "2023-06-12 17:00"
---

# ã¯ã˜ã‚ã«

ä»¥ä¸‹ã®è¨˜äº‹ã‚’å‚è€ƒã«ã™ã‚Œã°ã„ã„ã‚ˆã†ã§ã™

https://nextjs.org/docs/app/api-reference/file-conventions/metadata/sitemap

# é™çš„ãªå ´åˆã®ä¾‹

```ts:app/sitemap.ts
import { MetadataRoute } from "next";

export default function sitemap(): MetadataRoute.Sitemap {
  const baseUrl = process.env.NEXT_PUBLIC_URL ?? '';
  const lastModified = new Date();

  const staticPaths = [
    {
      url: `${baseUrl}`,
      lastModified,
    },
    {
      url: `${baseUrl}/about`,
      lastModified,
    },
  ];

  return staticPaths;
}

```

# å‹•çš„ãªå ´åˆã®ä¾‹

```ts:app/sitemap.ts
import { MetadataRoute } from "next";
import { getArticles } from "../libs/article";

export default async function sitemap(): Promise<MetadataRoute.Sitemap> {
  const baseUrl = process.env.NEXT_PUBLIC_URL ?? '';
  const lastModified = new Date();

  const staticPaths = [
    {
      url: `${baseUrl}`,
      lastModified,
    },
    {
      url: `${baseUrl}/about`,
      lastModified,
    },
  ];

  const articles = await getArticles();
  const dynamicPaths = articles.map((article) => {
      return {
        url: `${baseUrl}/articles/${article.slug}`,
        lastModified,
      };
    });

  return [...staticPaths, ...dynamicPaths];
}
```

# ãƒ†ã‚¹ãƒˆ

ä»¥ä¸‹ã®ã‚ˆã†ãªã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—,http://localhost:3000/sitemap.xml ã«ã‚¢ã‚¯ã‚»ã‚¹ãªã©ã™ã‚Œã° OK ã§ã™

```bash:ãƒ†ã‚¹ãƒˆ
npm run build # next build
npm start # npx serve@latest out
```
